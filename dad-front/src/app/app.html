<div *ngIf="isAuthenticated" class="app-layout animate-fade-in">
  <!-- Navigation Header -->
  <nav class="navbar modern-navbar">
    <div class="navbar-brand">
      <div class="brand-logo">
        <app-icon name="products" size="icon-large" color="#007bff"></app-icon>
        <h1>{{ title }}</h1>
      </div>
    </div>
    
    <div class="navbar-nav">
      <button class="nav-link" (click)="navigateTo('/dashboard')" [class.active]="currentRoute === '/dashboard'">
        <app-icon name="dashboard" size="icon-small"></app-icon>
        <span>Dashboard</span>
      </button>
      <button class="nav-link" (click)="navigateTo('/categories')" [class.active]="currentRoute === '/categories'">
        <app-icon name="categories" size="icon-small"></app-icon>
        <span>Categorías</span>
      </button>
      <button class="nav-link" (click)="navigateTo('/products')" [class.active]="currentRoute === '/products'">
        <app-icon name="products" size="icon-small"></app-icon>
        <span>Productos</span>
      </button>
      <button class="nav-link" (click)="navigateTo('/inventory')" [class.active]="currentRoute === '/inventory'">
        <app-icon name="inventory" size="icon-small"></app-icon>
        <span>Inventario</span>
      </button>
      <button class="nav-link carrito-link" (click)="navigateTo('/carrito')" [class.active]="currentRoute === '/carrito'">
        <app-icon name="carrito" size="icon-small"></app-icon>
        <span>Carrito</span>
        <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
      </button>
      <button class="nav-link" (click)="navigateTo('/ventas')" [class.active]="currentRoute === '/ventas'">
        <app-icon name="ventas" size="icon-small"></app-icon>
        <span>Ventas</span>
      </button>
      <div class="dropdown" [class.open]="dropdownOpen">
        <button class="nav-link dropdown-toggle" 
                (click)="toggleDropdown()"
                [class.active]="currentRoute.includes('/ordenes-compra') || currentRoute.includes('/proveedores') || currentRoute.includes('/recepciones')">
          <app-icon name="products" size="icon-small"></app-icon>
          <span>Compras</span>
        </button>
        <div class="dropdown-menu" [class.show]="dropdownOpen">
          <button class="dropdown-item" (click)="navigateToAndClose('/ordenes-compra')" [class.active]="currentRoute === '/ordenes-compra'">
            <span>Órdenes de Compra</span>
          </button>
          <button class="dropdown-item" (click)="navigateToAndClose('/proveedores')" [class.active]="currentRoute === '/proveedores'">
            <span>Proveedores</span>
          </button>
          <button class="dropdown-item" (click)="navigateToAndClose('/recepciones')" [class.active]="currentRoute === '/recepciones'">
            <span>Recepciones</span>
          </button>
        </div>
      </div>
      <button class="nav-link" (click)="navigateTo('/users')" [class.active]="currentRoute === '/users'">
        <app-icon name="users" size="icon-small"></app-icon>
        <span>Usuarios</span>
      </button>
    </div>

    <div class="navbar-user">
      <button class="logout-btn modern-btn" (click)="logout()">
        <app-icon name="logout" size="icon-small"></app-icon>
        <span>Salir</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <router-outlet />
    </div>
  </main>
</div>

<!-- Show only router-outlet for login/register pages -->
<div *ngIf="!isAuthenticated" class="auth-layout">
  <router-outlet />
</div>
